<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlockLine Puzzle - Claim Your Rewards!</title>
    <style>
        @keyframes pulse {
            0% { transform: scale(1); }
            70% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; /* Prevent main page scroll when overlay is active */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5; color: #333;
        }
        
        /* --- STYLES FOR ADMOB-STYLE OVERLAY --- */
        #entry-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #111827; /* Dark Blue from screenshot */
            z-index: 9999;
            display: flex;
            flex-direction: column; /* To stack top, middle, bottom */
            transition: opacity 0.5s ease;
        }
        
        .ad-top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            flex-shrink: 0; /* Prevent this from shrinking */
        }
        
        .ad-badge {
            background-color: #ffc107; color: black;
            padding: 3px 8px; font-size: 12px; font-weight: bold;
            border-radius: 4px;
        }

        #ad-timer-close {
            background-color: rgba(0, 0, 0, 0.4); color: white;
            width: 32px; height: 32px;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; border-radius: 50%;
            cursor: default;
        }
        #ad-timer-close.close-button {
            cursor: pointer;
            font-size: 20px;
            font-weight: bold;
        }

        .ad-main-content {
            flex-grow: 1; /* Takes up all available space */
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            /* --- KEY CHANGE FOR STABLE FOOTER --- */
            overflow-y: auto; /* Enable vertical scroll ONLY for this area if needed */
            min-height: 0;    /* Essential for flexbox overflow behavior */
        }

        .ad-footer {
            padding: 20px;
            text-align: center;
            color: white;
            flex-shrink: 0; /* Prevent this from shrinking */
            background-color: #111827; /* Ensure solid background */
        }
        .ad-footer-info {
            display: flex; align-items: center; justify-content: center;
            margin-bottom: 20px; text-align: left;
        }
        .ad-footer-info img { width: 60px; height: 60px; border-radius: 12px; margin-right: 15px; }
        .ad-footer-info .text h2 { margin: 0; font-size: 22px; }
        .ad-footer-info .text p { margin: 0; font-size: 14px; opacity: 0.8; }

        .reward-button {
            display: none; /* Hidden by default */
            width: 100%; padding: 18px; font-size: 18px; font-weight: bold;
            color: white; background: linear-gradient(90deg, #3B82F6, #14B8A6);
            border: none; border-radius: 12px; cursor: pointer;
            animation: pulse 2s infinite;
        }
        /* ---------------------------------- */

        /* Styles for the main page content */
        .container { max-width: 800px; margin: 0 auto; padding: 20px; box-sizing: border-box; }
        .main-card { background-color: white; border-radius: 12px; box-shadow: 0 6px 12px rgba(0,0,0,0.1); margin-bottom: 25px; overflow: hidden; }
        .card-header { display: flex; align-items: center; padding: 20px; background-color: #f8f9fa; }
        .header-logo { max-width: 50px; border-radius: 12px; margin-right: 15px; }
        .card-header h1 { margin: 0; font-size: 24px; font-weight: 600; color: #333; }
        .card-body { padding: 25px; text-align: center; }
        .card-body h2 { margin-top: 0; color: #4A90E2; font-size: 22px; }
        .card-body p { line-height: 1.7; font-size: 16px; margin-bottom: 1em; }
    </style>
</head>
<body>

    <!-- =========== ADMOB-STYLE OVERLAY (NO HTML CHANGES) =========== -->
    <div id="entry-overlay">
        <div class="ad-top-bar">
            <div class="ad-badge">Ad</div>
            <div id="ad-timer-close">10s</div>
        </div>
        
        <div class="ad-main-content" id="ad-main-content">
            <!-- The Native Banner Ad will be moved here by JavaScript -->
        </div>

        <div class="ad-footer">
            <div class="ad-footer-info">
                <img src="https://i.ibb.co/9kY1tpwF/blockine-icon.jpg" alt="Game Icon">
                <div class="text">
                    <h2>BlockLine Puzzle</h2>
                    <p>Continue to the rewards page.</p>
                </div>
            </div>
            <button class="reward-button">Claim Reward & Continue</button>
        </div>
    </div>
    <!-- ========================================================= -->

    <div class="container">
        <div id="native-ad-container" style="display: none;">
            <div id="container-2c05fd49cb501befe8e1bf317d40ee5b"></div>
        </div>

        <div class="main-card">
            <div class="card-header">
                <img src="https://i.ibb.co/9kY1tpwF/blockine-icon.jpg" alt="Icon" class="header-logo">
                <h1>BlockLine Puzzle</h1>
            </div>
            <div class="card-body">
                <h2>Welcome, Puzzle Master!</h2>
                <p>Thanks for your support! Your reward is ready. Enjoy the game!</p>
            </div>
        </div>
        <footer class="footer">
            <p>&copy; 2024 BlockLine Puzzle Team. All Rights Reserved.</p>
        </footer>
    </div>

    <!-- =========== SCRIPTS (NO JAVASCRIPT CHANGES) =========== -->
    <script async="async" data-cfasync="false" src="//pl27096943.effectivegatecpm.com/2c05fd49cb501befe8e1bf317d40ee5b/invoke.js"></script>
    <script id="socialBarScript" type="text/plain" data-src="//pl26479822.effectivegatecpm.com/11/f3/83/11f3830187c378aedebef88b0bcd83a0.js"></script>
    
    <script type="text/javascript">
        // --- Ad and Element References ---
        const directLinkUrl = "https://www.effectivegatecpm.com/zi30dfhjnn?key=b78830ea0cb80a28c4b278ee2e122b06";
        const overlay = document.getElementById('entry-overlay');
        const rewardButton = document.querySelector('.reward-button');
        const adTimerClose = document.getElementById('ad-timer-close');
        const nativeAdContainer = document.getElementById('native-ad-container');
        const mainContentArea = document.getElementById('ad-main-content');

        let adTriggered = false;

        // --- Core Logic (No changes needed here) ---

        // 1. Move the native banner ad into the overlay
        if (nativeAdContainer) {
            mainContentArea.appendChild(nativeAdContainer);
            nativeAdContainer.style.display = 'block';
        }

        // 2. Show the "Continue" button after 2 seconds
        setTimeout(() => {
            rewardButton.style.display = 'block';
        }, 2000);

        // 3. Start the 10-second countdown
        let secondsLeft = 10;
        const timerInterval = setInterval(() => {
            secondsLeft--;
            if (secondsLeft > 0) {
                adTimerClose.textContent = `${secondsLeft}s`;
            } else {
                clearInterval(timerInterval);
                adTimerClose.innerHTML = '&times;';
                adTimerClose.classList.add('close-button');
            }
        }, 1000);

        // 4. Create the main function to trigger the ad and close the overlay
        function triggerAdAndClose() {
            if (adTriggered) return;
            adTriggered = true;
            window.open(directLinkUrl, '_blank');
            overlay.style.opacity = '0';
            setTimeout(() => { overlay.style.display = 'none'; }, 500);
            document.body.style.overflow = 'auto'; // Restore scroll on main page

            const socialBarScriptTag = document.getElementById('socialBarScript');
            if (socialBarScriptTag) {
                const newScript = document.createElement('script');
                newScript.type = 'text/javascript';
                newScript.src = socialBarScriptTag.getAttribute('data-src');
                document.body.appendChild(newScript);
            }
        }

        // 5. Add click listeners
        rewardButton.addEventListener('click', triggerAdAndClose);
        adTimerClose.addEventListener('click', () => {
            if (secondsLeft <= 0) {
                triggerAdAndClose();
            }
        });
        
    </script>
    <!-- ======================== -->
</body>
</html>
